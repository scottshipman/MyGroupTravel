{% extends '::base.html.twig' %}
{% block title %}Edit {{ entity.name }}{% endblock %}
{% block page_title %}Edit {{ entity.name }}{% endblock %}

{% block body -%}

    <div class="brand-logo" id="brand-logo-1" logo="primary">
        <div id="avatar-label-1" class="avatar-label mdl-label-mimic">Brand Logo</div>

        {{ render(controller('MediaBundle:Media:createDropzoneBrandForm', {'context':'primary'})) }}

        <div class="is-dirty mdl-textfield--floating-label">
            {% if entity.media %}
                <div class="media-placeholder-image image-1 edit">
                    <div id="overlay">
                        <i style="color:red;" class="fa fa-times fa-2x"></i>
                    </div>
                </div>
            {% else %}
                <span class="media-placeholder-image new">
                    <i class="fa fa-picture-o fa-3x"></i>
                    <span>Click to upload</span>
                </span>
            {% endif %}
        </div>
    </div>

    <div class="brand-logo" id="brand-logo-2" logo="email">
        <div id="avatar-label-2" class="avatar-label mdl-label-mimic">Brand Email Logo</div>

        {{ render(controller('MediaBundle:Media:createDropzoneBrandForm', {'context':'email'})) }}

        <div id="user_media" class="is-dirty mdl-textfield--floating-label">
            {% if entity.mediaEmail %}
                <div class="media-placeholder-image image-2 edit">
                    <div id="overlay">
                        <i style="color:red;" class="fa fa-times fa-2x"></i>
                    </div>
                </div>
            {% else %}
                <span class="media-placeholder-image image-2 new">
                    <i class="fa fa-picture-o fa-3x"></i>
                    <span>Click to upload</span>
                </span>
            {% endif %}
        </div>
    </div>

    {{ form_start(edit_form) }}

        {{ form_widget(edit_form) }}

    {{ form_end(edit_form) }}

    <ul class="record_actions">
        <li>
            <a class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" href="{{ path('_manage_brand') }}"><i class="fa fa-arrow-circle-left"></i> Back to the list</a>
        </li>
        <li>{{ form(delete_form) }}</li>
    </ul>

    <script>
    $(document).ready(function () {
        {% if entity.media %}
            var bUrl1 = '{{ asset(".." ~ entity.media.getRelativePath ~ "/" ~ entity.media.getHashedFilename ) }}';
            $(".media-placeholder-image.image-1").css({
                "background-image": "url(" + bUrl1 + ")"
            });
            $("#tui_toolkit_brandbundle_brand_media").val('{{ entity.media.id }}');
            $(document).on('click', '.media-placeholder-image.image-1', function(e) {
                $("#tui_toolkit_brandbundle_brand_media").val('');
            });
        {% endif %}
        {% if entity.mediaEmail %}
            var bUrl2 = '{{ asset(".." ~ entity.mediaEmail.getRelativePath ~ "/" ~ entity.mediaEmail.getHashedFilename ) }}';
            $(".media-placeholder-image.image-2").css({
                "background-image": "url(" + bUrl2 + ")"
            });
            $("#tui_toolkit_brandbundle_brand_mediaEmail").val('{{ entity.mediaEmail.id }}');
            $(document).on('click', '.media-placeholder-image.image-2', function(e) {
                $("#tui_toolkit_brandbundle_brand_mediaEmail").val('');
            });
        {% endif %}

        // Dropzone manipulation
        $(document).on('click', '.media-placeholder-image', function () {
            $(this).css({"display": "none"});
            $(this).parents('.brand-logo').find('.dropzone-form').css({"display": "block"});
            $(this).parents('.brand-logo').find('.dropzone-form-close').css({"display": "block"});
        });
        $(document).on('click', '.avatar-label', function () {
            $(this).parents('.brand-logo').find('.media-placeholder-image').css({"display": "block"});
            $(this).parents('.brand-logo').find('.dropzone-form').css({"display": "none"});
            $(this).parents('.brand-logo').find('.dropzone-form-close').css({"display": "none"});
        });
    });
    </script>

{% endblock %}
