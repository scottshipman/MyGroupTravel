{% block dropzone %}

<form enctype="multipart/form-data" class="dropzone dropzone-form" action="{{ oneup_uploader_endpoint('brand') }}" method="post" name="dropzone-{{ context }}" id="dropzone-{{ context }}">
    {{ form_widget(form) }}
</form>

{% endblock %}

<script type="text/javascript">
$(function () {
    $('#dropzone-{{ context }}').dropzone({
        maxFiles: 1,
        acceptedMimeTypes: 'image/jpeg,image/png,image/jpg',
        addRemoveLinks: true,
        dictDefaultMessage: "{% trans %}media.dropzone.default_message{% endtrans %}",
        init: function () {
            this.hiddenFileInput.removeAttribute('multiple');
            this.on("success", function (file, response) {
                if (".media-placeholder-{{ context }}".length > 0) {
                    $(".media-placeholder-{{ context }}").val(response.id);
                }
            });
            this.on("addedfile", function () {
                $('#dropzone-{{ context }} .dropzone-form-close').css({"display": "none"});
                if (this.files[1] != null) {
                    this.removeFile(this.files[0]);
                }
            });
            this.on("removedfile", function (file) {
                $('#dropzone-{{ context }} .dropzone-form-close').css({"display": "block"});
            });
        }
    });
});
</script>
